<html>
    <head>
        <link rel="stylesheet" href="adminPanelStyle.css">
        <meta charset="utf-8">
        <body>
            <div class='pageWrapper'>

                <div class='actionButtonsContainer'>
                    <h1>Actions</h1>
                    <div class='buttonsWrapper'>
                        <button class='actionButton' id='scoreboard'>Add <br/> Scoreboard</button>
                        <button class='actionButton' id='statistics'>Add <br/> Statistics</button>
                        <button class='actionButton' id='newGame'>Add <br/> Next Game</button>

                    </div>

                </div>
                <div class='adminPanelContainer' id='adminPanelContainer'>
                    <div class='scoreboardContainer' id='scoreboardContainer'>

                    </div>
                    <div class='gamesPanelContainer'>
                        <div class='gamesPanel' id='gamesPanelContainer'>
                            
                        </div>
                    </div>

                </div>
            </div>
            <script src='./addNewGameScript.js'></script>
            <!-- <script src='./drag-drop.js'></script> -->
            <script src='./addScoreboard.js'></script>
            <script src='./overflowDetector.js'></script>
            <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
            <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
            <script>
            let elementCounter = -1
            $(document).ready()
            {
                // create a class for the gamePanel
                // create an object that is an instance of the gamePanel class everytime a new widget button is pressed
                // add every new object to a list
                //iterate over the list whenever you create a new widget and check for a free space and then add the new widget there, if there is no free space, do the respective action
                $('#newGame').on('click',()=>{
                    elementCounter+=1
                    const newElement = document.createElement('div'); // this line here creates the div element
                    newElement.draggable=true // this line here makes the div element draggable
                    newElement.className='individualGamePanel'+` ${elementCounter}`; // this line gives the div element a className
                    newElement.id='individualGamePanel'; // this line gives the div element an ID
                    newElement.style.position = 'relative' // this line gives the div element the position attributes of relative
                    const newElementGrid = document.querySelector('.gamesPanel'); // this line here selectes the games panel that I'll use to append the newly created element to
                    newElementGrid.appendChild(newElement); // this line appends the div to the gamesPanel
                    $('.individualGamePanel').draggable({ // here I use JQUERY to impl;ement the dragging of the elements
                        containment: '.adminPanelContainer', // this line permits the movement of the dragged elements outside of the admin panel
                        create: function()
                        {
                            let offset = $(this).offset()
                            let x_pos = offset.left
                            let y_pos = offset.top
                            let classNamee = $(this).attr('class')
                            let widgetNumber = classNamee.split(' ')[1]
                            let width = $(this).width()
                            let height = $(this).height()   
                            let xy_data={
                                id:widgetNumber,
                                x:x_pos,
                                y:y_pos
                            }         
                            let stringified = JSON.stringify(xy_data)
                            localStorage.setItem('XY_DATA', stringified)          
                        },
                        drag: function()
                        {
                            // here I am updating the data, that is sent to the JS file, which in turn changes the data for the respective gamepanel 
                            let offset = $(this).offset()
                            let x_pos = offset.left
                            let y_pos = offset.top
                            let classNamee = $(this).attr('class')
                            let widgetNumber = classNamee.split(' ')[1]
                            let xy_data={
                                id: widgetNumber,
                                x:x_pos,
                                y:y_pos
                            }         
                            let stringified = JSON.stringify(xy_data)
                            localStorage.setItem('XY_DATA_UPDATED', stringified)     
                        }
                    })
                })
            }
            </script>


        </body>
    </head>
</html>
